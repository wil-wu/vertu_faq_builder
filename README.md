# Vertu FAQ Builder

FAQè¯­æ–™æ„å»ºã€‚

## ğŸš€ ç‰¹æ€§

- âœ… **UV åŒ…ç®¡ç†**: ä½¿ç”¨ uv è¿›è¡Œå¿«é€Ÿä¾èµ–ç®¡ç†
- âœ… **FastAPI æ¡†æ¶**: é«˜æ€§èƒ½å¼‚æ­¥ Web æ¡†æ¶
- âœ… **æ¨¡å—åŒ–æ¶æ„**: APIRouter ç»„ç»‡çš„å­æœåŠ¡ç»“æ„
- âœ… **API ç‰ˆæœ¬åŒ–**: æ”¯æŒå¤šç‰ˆæœ¬ API å¹¶å­˜
- âœ… **é¢å‘å¯¹è±¡è®¾è®¡**: æ ¸å¿ƒæ¨¡å—é‡‡ç”¨ OOP èŒƒå¼
- âœ… **é…ç½®ç®¡ç†**: Pydantic Settings ç®¡ç†å…¨å±€å’ŒæœåŠ¡é…ç½®
- âœ… **å…±äº«å¯¹è±¡**: åº”ç”¨çº§å’ŒæœåŠ¡çº§å…±äº«å¯¹è±¡ç®¡ç†
- âœ… **çº¿ç¨‹å®‰å…¨**: å•ä¾‹æ¨¡å¼ç¡®ä¿å¤šçº¿ç¨‹å®‰å…¨
- âœ… **å¯è§‚æµ‹æ€§**: Prometheus æŒ‡æ ‡ç›‘æ§
- âœ… **Docker æ”¯æŒ**: å®Œæ•´çš„å®¹å™¨åŒ–æ–¹æ¡ˆ
- âœ… **æµ‹è¯•æ¡†æ¶**: Pytest å¼‚æ­¥æµ‹è¯•æ”¯æŒ

## ğŸ“ é¡¹ç›®ç»“æ„

```
vertu_faq_builder/
â”œâ”€â”€ main.py                       # åº”ç”¨å¯åŠ¨å…¥å£
â”œâ”€â”€ pyproject.toml                # é¡¹ç›®é…ç½®
â”œâ”€â”€ uv.lock                       # ä¾èµ–é”å®š
â”œâ”€â”€ Dockerfile                    # Docker æ„å»º
â”œâ”€â”€ docker-compose.yml            # Docker Compose
â”œâ”€â”€ docker-build.sh               # Docker æ„å»ºè„šæœ¬
â”œâ”€â”€ .huggingface/                 # Hugging Face æ¨¡å‹æ–‡ä»¶ç›®å½•
â”œâ”€â”€ app/                          # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ app.py                    # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config.py                 # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ scanner.py                # è·¯ç”±è‡ªåŠ¨æ‰«æ
â”‚   â”œâ”€â”€ core/                     # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ database.py           # æ•°æ®åº“ä¸æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ enum.py               # æšä¸¾å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ exceptions.py         # è‡ªå®šä¹‰å¼‚å¸¸
â”‚   â”‚   â”œâ”€â”€ managers.py           # å¼‚æ­¥ä»»åŠ¡ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ middlewares.py        # ä¸­é—´ä»¶
â”‚   â””â”€â”€ services/                 # å­æœåŠ¡
â”‚       â”œâ”€â”€ answer_enhancement/   # ç­”æ¡ˆå¢å¼ºæœåŠ¡
â”‚       â”‚   â”œâ”€â”€ checkers.py       # ç­–ç•¥æ£€æŸ¥å™¨
â”‚       â”‚   â”œâ”€â”€ config.py         # æœåŠ¡é…ç½®
â”‚       â”‚   â”œâ”€â”€ deps.py           # ä¾èµ–æ³¨å…¥
â”‚       â”‚   â”œâ”€â”€ enhancers.py      # å®šå‘ç­–ç•¥å¢å¼ºå™¨
â”‚       â”‚   â”œâ”€â”€ enum.py           # ç­–ç•¥æšä¸¾
â”‚       â”‚   â”œâ”€â”€ extractors.py     # å†…å®¹æŠ½å–å™¨
â”‚       â”‚   â”œâ”€â”€ jobs.py           # å¼‚æ­¥ä»»åŠ¡
â”‚       â”‚   â”œâ”€â”€ models.py         # Pydantic æ¨¡å‹
â”‚       â”‚   â”œâ”€â”€ router.py         # API è·¯ç”±
â”‚       â”‚   â””â”€â”€ service.py        # ä¸šåŠ¡é€»è¾‘
â”‚       â””â”€â”€ qa_generation/        # QA ç”ŸæˆæœåŠ¡
â”‚           â”œâ”€â”€ config.py         # æœåŠ¡é…ç½®
â”‚           â”œâ”€â”€ deps.py           # ä¾èµ–æ³¨å…¥
â”‚           â”œâ”€â”€ enum.py           # æšä¸¾å®šä¹‰
â”‚           â”œâ”€â”€ filters.py        # QA è¿‡æ»¤å™¨
â”‚           â”œâ”€â”€ generators.py     # QA ç”Ÿæˆå™¨
â”‚           â”œâ”€â”€ jobs.py           # å¼‚æ­¥ä»»åŠ¡
â”‚           â”œâ”€â”€ models.py         # Pydantic æ¨¡å‹
â”‚           â”œâ”€â”€ processors.py     # QA åå¤„ç†å™¨
â”‚           â”œâ”€â”€ router.py         # API è·¯ç”±
â”‚           â”œâ”€â”€ service.py        # ä¸šåŠ¡é€»è¾‘
â”‚           â””â”€â”€ utils.py          # å·¥å…·å‡½æ•°
â””â”€â”€ tests/                        # æµ‹è¯•
    â”œâ”€â”€ conftest.py               # æµ‹è¯•é…ç½®
    â””â”€â”€ test_api.py               # API æµ‹è¯•
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…ä¾èµ–
uv sync
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# ç¼–è¾‘ .env æ–‡ä»¶ï¼ŒæŒ‰éœ€é…ç½®
vim .env
```

### 3. è¿è¡ŒæœåŠ¡

#### æœ¬åœ°å¼€å‘

```bash
# è¿è¡Œ API æœåŠ¡
uv run main.py

# æˆ–
uvicorn main:app --reload
```

### 4. è®¿é—®æœåŠ¡

- API æ–‡æ¡£: http://localhost:8000/docs
- Prometheus æŒ‡æ ‡: http://localhost:8000/metrics
- Prometheus UIï¼ˆåç»­éƒ¨ç½²ï¼‰: http://localhost:9090

## ğŸ“ åˆ›å»ºæ–°æœåŠ¡

### 1. åˆ›å»ºæœåŠ¡ç›®å½•

```bash
mkdir -p app/services/your_service
cd app/services/your_service
```

### 2. åˆ›å»ºå¿…è¦æ–‡ä»¶

```bash
config.py
deps.py
models.py
router.py
service.py
```
### 3. è‡ªåŠ¨æ³¨å†Œ

è·¯ç”±ä¼šè¢« `Scanner` è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œ,æ— éœ€æ‰‹åŠ¨é…ç½®ã€‚

## ğŸ§ª æµ‹è¯•
è¡¥å……

## ğŸ“Š ç›‘æ§

### Prometheus æŒ‡æ ‡

æœåŠ¡è‡ªåŠ¨æš´éœ²ä»¥ä¸‹æŒ‡æ ‡:

- `http_requests_total`: è¯·æ±‚æ€»æ•°
- `http_request_duration_seconds`: è¯·æ±‚è€—æ—¶
- `http_requests_inprogress`: è¿›è¡Œä¸­çš„è¯·æ±‚æ•°

### å¥åº·æ£€æŸ¥

```bash
# ä¸»æœåŠ¡å¥åº·æ£€æŸ¥
curl http://localhost:8000/health
```

## ğŸ”§ é…ç½®è¯´æ˜

### å…¨å±€é…ç½® (app/config.py)

å­˜æ”¾ä¸€äº›å…¬å…±é…ç½®

### æœåŠ¡é…ç½®

æ¯ä¸ªæœåŠ¡éƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶,ä½¿ç”¨ç¯å¢ƒå˜é‡å‰ç¼€éš”ç¦»

## ğŸ”’ çº¿ç¨‹å®‰å…¨

æ‰€æœ‰å…±äº«å¯¹è±¡éƒ½ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼

## ğŸ“¦ ä¾èµ–ç®¡ç†

```bash
# æ·»åŠ æ–°ä¾èµ–
uv add package-name

# æ·»åŠ å¼€å‘ä¾èµ–
uv add --dev package-name

# æ›´æ–°ä¾èµ–
uv sync --upgrade

# æŸ¥çœ‹ä¾èµ–æ ‘
uv tree
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **é…ç½®ç®¡ç†**: ä½¿ç”¨ Pydantic Settings,ç¯å¢ƒå˜é‡ä¼˜å…ˆ
2. **æ—¥å¿—è®°å½•**: ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—,åŒ…å«ä¸Šä¸‹æ–‡ä¿¡æ¯
3. **é”™è¯¯å¤„ç†**: åœ¨æœåŠ¡å±‚æ•è·å¼‚å¸¸,è¿”å›æ ‡å‡†å“åº”
4. **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨ FastAPI ä¾èµ–æ³¨å…¥ç³»ç»Ÿ
5. **å¼‚æ­¥ä¼˜å…ˆ**: æ‰€æœ‰ I/O æ“ä½œä½¿ç”¨å¼‚æ­¥
6. **çº¿ç¨‹å®‰å…¨**: å…±äº«å¯¹è±¡ä½¿ç”¨å•ä¾‹æ¨¡å¼ + é”
7. **æµ‹è¯•è¦†ç›–**: ä¿æŒ 80%+ æµ‹è¯•è¦†ç›–ç‡

## ğŸ› æ•…éšœæ’æŸ¥
è¡¥å……